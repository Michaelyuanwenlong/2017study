#### 2107-3-17 webview
[Android Chromium WebView学习启动篇](http://blog.csdn.net/luoshengyang/article/details/46569161)
```
`学习浏览器技术可以得到什么？`
1. 浏览器要处理的两个核心对象是`HTML和JavaScript`。HTML用来实现网页UI，涉及到的最核心技术是`UI渲染技术`。JavaScript用来实现网页功能，涉及到的最核心技术`JavaScript引擎技术`

2. 鉴于现在JavaScript的流行性，作为一个软件开发从业者，我们不仅会使用JavaScript，还需要知道JavaScript在背后是如何运行的，这样才能达到一个更高的境界。JavaScript是一种动态语言，与C/C++、Java这些静态语言一样，在实现上都是涉及到了编译相关的知识，例如语法解析、生成语法树、生成字节码指令、生成本地指令和指令优化等。只不过对于动态语言来说，这些操作发生在应用程序运行时，只对于静态语言来说，这些操作发生应用程序运行前。此外，运行JavaScript的引擎与运行Java字节码的虚拟机一样，在运行时都提供了内存自动管理技术，也就是会执行GC。由此可见，学习JavaScript可以获得很多编译语言相关的知识。这也是学习浏览器技术可以得到的第二点核心技术

3. 还可以学习到一个复杂系统的架构，例如它的对象管理技术、多进程架构和多线程编程模型等等

`Android Chromium WebView的学习路线是什么？`
通过分析Android 5.0版本源码自带的chromium_org工程来学习Android Chromium WebView的实现，并且是使用`循序渐进的学习方法`，`先从一些基础知识学起`，例如Chromium的智能指针技术、线程通信模型和进程通信模型，然后再配合使用情景来，`逐渐地分析复杂的技术`。例如网页资源下载、网页分层、分块、绘制、合成和硬件加速渲染等技术等。

这将会是一个充满挑战的学习过程，但是如果能够坚持下来，收获也是巨大的，因为我们所学习的知识很有可能就是下一个技术风口！

```

#### 2017-03-18 Chromium和WebKit的智能指针实现原理分析
[Chromium和WebKit的智能指针实现原理分析](http://blog.csdn.net/luoshengyang/article/details/46598223)
```
智能指针是实现对象自动释放的有效技术手段
在广义上，智能指针划分为两类:1. 一个对象可以同时被多个智能指针引用。这类智能指针要求被引用的对象具有计数的功能,当一个对象的引用计数值等于0的时候，就表示它要被释放了。这类智能指针适合作为函数参数或者返回值在模块之间进行传递，从而实现共享. 2. 第二类智能指针引用的对象是独占的，也就是一个对象同一时刻只可以被一个智能指针引用。这类智能指针不要求被引用对象具有计数的功能。只要这类智能指针的生命周期超出了它自己的范围，那么它引用的对象就会被自动销毁。这类智能指针适合在函数或者内部使用，用来自动化释放那些不需要了的对象

总结
1. WebKit和Chromium的智能指针分别提供了线程不安全和线程安全两个版本的具有引用计数功能的基类RefCounted和ThreadSafeRefCounted。这样我们在设计一个类的时候，就需要考虑这个类的对象是否会在多线程环境下被访问。如果是的话，那么需要选择ThreadSafeRefCounted作为基类。否则的话，选择RefCounted作为基类就可以了。由于RefCounted在增加和减少引用计数时，不需要执行原子操作，因此效率就会更高。Android的智能指针只提供了线程安全版本的具有引用计数功能的基类RefBase和LightRefBase。其中，继承了RefBase类的子类的对象可以配合强指针和弱指针使用，而继承了LightRefBase类的子类的对象只可以配合轻量级指针使用。

       2. WebKit和Chromium同时提供了引用计数版本和非引用计数版本的智能指针的实现，即RefPtr和scoped_refptr，以及OwnPtr和scoped_ptr。Android没有提供非引用计数版本的智能指针的实现。

       3. WebKit优化了智能指针作为函数参数和函数返回值传递目标对象的过程，避免对目标对象的引用计数进行频繁的加1和减1操作，这是通过PassRefPtr类和PassOwnPtr类实现的。Chromium和Android没有提供此类智能指针的实现。

       4. WebKit和Chromium的智能指针都实现了move语意，但是Android的智能指针没有实现move语意。

       5. Chromium和Android的弱智能指针是通过继承方式关联一个生命周期比目标对象更长的额外对象来实现的，而WebKit的弱智能指针则是通过组合方式关联一个生命周期比目标对象更长的额外对象来实现的。

       6. WebKit和Chromium在实现一个类的时候，可以选择是否需要同时支持强智能指针和弱智能指针，但是Android在实现一个类的时候，对强智能指针和弱智能指针的支持是整体的，也就是要么同时支持强智能指针和弱智能指针，要么同时不支持强智能指针和弱智能指针。

       从上面这6点总结就可以看出，WebKit和Chromium的智能指针设计更加精细化和组件化，开发者在设计一个类的时候，可以根据需要有选择地实现相应的智能指针功能，而Android的智能指针设计相对来说就比较粗略，没有太多可选择的余地。
```

```
承上启下
 在Chromium中，与智能指针一样作为重要的基础设施的，还有多线程编程模型。Chromium的多线程编程模型用到了一种称为Callback的机制在线程间进行通信，因此在接下来的两篇文章中，我们先分析Chromium的Callback机制，然后再分析Chromium的线程编程模型
```

[Android系统的智能指针（轻量级指针、强指针和弱指针）的实现原理分析](http://blog.csdn.net/luoshengyang/article/details/6786239)


#### 2017-3-22 Chromium的多线程 Callback线程间进行通信
[Chromium多线程通信的Closure机制分析](http://blog.csdn.net/luoshengyang/article/details/46747797)

Chromium里面使用了很多模板，我觉得主要是两个用处吧。第一个就让编译器自动生成代码。第二个是利用模板的静态特性做一些代码编译时检查，减少运行时的出错机会

c++模板函数和模板类

